<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Clerk_driver (clerk.Clerk_driver)</title><link rel="stylesheet" href="../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">clerk</a> &#x00BB; Clerk_driver</nav><header class="odoc-preamble"><h1>Module <code><span>Clerk_driver</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#command-line-interface">Command line interface</a></li><li><a href="#testing">Testing</a></li><li><a href="#running">Running</a></li><li><a href="#driver">Driver</a></li><li><a href="#return-code-values">Return code values</a></li><li><a href="#driver_2">Driver</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Nj" class="anchored"><a href="#module-Nj" class="anchor"></a><code><span><span class="keyword">module</span> Nj</span><span> = <a href="../../ninja_utils/Ninja_utils/index.html">Ninja_utils</a></span></code></div></div><h2 id="command-line-interface"><a href="#command-line-interface" class="anchor"></a>Command line interface</h2><div class="odoc-spec"><div class="spec value" id="val-files_or_folders" class="anchored"><a href="#val-files_or_folders" class="anchor"></a><code><span><span class="keyword">val</span> files_or_folders : <span><span>string list</span> <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-command" class="anchored"><a href="#val-command" class="anchor"></a><code><span><span class="keyword">val</span> command : <span>string <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-debug" class="anchored"><a href="#val-debug" class="anchor"></a><code><span><span class="keyword">val</span> debug : <span>bool <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-reset_test_outputs" class="anchored"><a href="#val-reset_test_outputs" class="anchor"></a><code><span><span class="keyword">val</span> reset_test_outputs : <span>bool <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-catalac" class="anchored"><a href="#val-catalac" class="anchor"></a><code><span><span class="keyword">val</span> catalac : <span><span>string option</span> <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-ninja_output" class="anchored"><a href="#val-ninja_output" class="anchor"></a><code><span><span class="keyword">val</span> ninja_output : <span><span>string option</span> <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-scope" class="anchored"><a href="#val-scope" class="anchor"></a><code><span><span class="keyword">val</span> scope : <span><span>string option</span> <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-makeflags" class="anchored"><a href="#val-makeflags" class="anchor"></a><code><span><span class="keyword">val</span> makeflags : <span><span>string option</span> <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-catala_opts" class="anchored"><a href="#val-catala_opts" class="anchor"></a><code><span><span class="keyword">val</span> catala_opts : <span><span>string option</span> <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-clerk_t" class="anchored"><a href="#val-clerk_t" class="anchor"></a><code><span><span class="keyword">val</span> clerk_t : 
  <span><span>( <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
    <span>string <span class="arrow">&#45;&gt;</span></span>
    <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
    <span>bool <span class="arrow">&#45;&gt;</span></span>
    <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
    <span>bool <span class="arrow">&#45;&gt;</span></span>
    <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
    <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="xref-unresolved">Cmdliner</span>.Term.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-version" class="anchored"><a href="#val-version" class="anchor"></a><code><span><span class="keyword">val</span> version : string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-info" class="anchored"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : <span class="xref-unresolved">Cmdliner</span>.Cmd.info</span></code></div></div><h2 id="testing"><a href="#testing" class="anchor"></a>Testing</h2><div class="odoc-spec"><div class="spec type" id="type-expected_output_descr" class="anchored"><a href="#type-expected_output_descr" class="anchor"></a><code><span><span class="keyword">type</span> expected_output_descr</span><span> = </span><span>{</span></code><table><tr id="type-expected_output_descr.tested_filename" class="anchored"><td class="def record field"><a href="#type-expected_output_descr.tested_filename" class="anchor"></a><code><span>tested_filename : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Name of the file that's being tested</p><span class="comment-delim">*)</span></td></tr><tr id="type-expected_output_descr.output_dir" class="anchored"><td class="def record field"><a href="#type-expected_output_descr.output_dir" class="anchor"></a><code><span>output_dir : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Name of the output directory where all expected outputs are stored</p><span class="comment-delim">*)</span></td></tr><tr id="type-expected_output_descr.id" class="anchored"><td class="def record field"><a href="#type-expected_output_descr.id" class="anchor"></a><code><span>id : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Id of this precise unit test that will be associated to an expected output</p><span class="comment-delim">*)</span></td></tr><tr id="type-expected_output_descr.cmd" class="anchored"><td class="def record field"><a href="#type-expected_output_descr.cmd" class="anchor"></a><code><span>cmd : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Catala command to launch to run the test, excluding &quot;catala&quot; at the begin, and the name of the file to test</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-catala_suffix_regex" class="anchored"><a href="#val-catala_suffix_regex" class="anchor"></a><code><span><span class="keyword">val</span> catala_suffix_regex : <span class="xref-unresolved">Re</span>.Pcre.regexp</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-readdir_sort" class="anchored"><a href="#val-readdir_sort" class="anchor"></a><code><span><span class="keyword">val</span> readdir_sort : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p><code>readdir_sort dirname</code> returns the sorted subdirectories of <code>dirname</code> in an array or an empty array if the <code>dirname</code> doesn't exist.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-test" class="anchored"><a href="#type-test" class="anchor"></a><code><span><span class="keyword">type</span> test</span><span> = </span><span>{</span></code><table><tr id="type-test.text_before" class="anchored"><td class="def record field"><a href="#type-test.text_before" class="anchor"></a><code><span>text_before : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Verbatim of everything from the last test end or beginning of file up to the test output start</p><span class="comment-delim">*)</span></td></tr><tr id="type-test.params" class="anchored"><td class="def record field"><a href="#type-test.params" class="anchor"></a><code><span>params : <span>string list</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Catala command-line arguments for the test</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-file_tests" class="anchored"><a href="#type-file_tests" class="anchor"></a><code><span><span class="keyword">type</span> file_tests</span><span> = </span><span>{</span></code><table><tr id="type-file_tests.tests" class="anchored"><td class="def record field"><a href="#type-file_tests.tests" class="anchor"></a><code><span>tests : <span><a href="#type-test">test</a> list</span>;</span></code></td></tr><tr id="type-file_tests.text_after" class="anchored"><td class="def record field"><a href="#type-file_tests.text_after" class="anchor"></a><code><span>text_after : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Verbatim of everything following the last test</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-inline_test_start_key" class="anchored"><a href="#val-inline_test_start_key" class="anchor"></a><code><span><span class="keyword">val</span> inline_test_start_key : string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-has_inline_tests" class="anchored"><a href="#val-has_inline_tests" class="anchor"></a><code><span><span class="keyword">val</span> has_inline_tests : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-scan_for_inline_tests" class="anchored"><a href="#val-scan_for_inline_tests" class="anchor"></a><code><span><span class="keyword">val</span> scan_for_inline_tests : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_tests">file_tests</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-search_for_expected_outputs" class="anchored"><a href="#val-search_for_expected_outputs" class="anchor"></a><code><span><span class="keyword">val</span> search_for_expected_outputs : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-expected_output_descr">expected_output_descr</a> list</span></span></code></div><div class="spec-doc"><p>Given a file, looks in the relative <code>output</code> directory if there are files with the same base name that contain expected outputs for different</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Var" class="anchored"><a href="#module-Var" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Var/index.html">Var</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Var references used in the Clerk file</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pipe_diff_cmd" class="anchored"><a href="#val-pipe_diff_cmd" class="anchor"></a><code><span><span class="keyword">val</span> pipe_diff_cmd : <a href="../../ninja_utils/Ninja_utils/Expr/index.html#type-t">Nj.Expr.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-inline_test_rule" class="anchored"><a href="#val-inline_test_rule" class="anchor"></a><code><span><span class="keyword">val</span> inline_test_rule : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Nj.Rule.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-inline_reset_rule" class="anchored"><a href="#val-inline_reset_rule" class="anchor"></a><code><span><span class="keyword">val</span> inline_reset_rule : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Nj.Rule.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-add_reset_rules_aux" class="anchored"><a href="#val-add_reset_rules_aux" class="anchor"></a><code><span><span class="keyword">val</span> add_reset_rules_aux : 
  <span>redirect:string <span class="arrow">&#45;&gt;</span></span>
  <span>rule_name:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Ninja_utils.Rule.t</a> <span class="xref-unresolved">Nj</span>.RuleMap.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Ninja_utils.Rule.t</a> <span class="xref-unresolved">Nj</span>.RuleMap.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-add_test_rules_aux" class="anchored"><a href="#val-add_test_rules_aux" class="anchor"></a><code><span><span class="keyword">val</span> add_test_rules_aux : 
  <span>rule_name:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Ninja_utils.Rule.t</a> <span class="xref-unresolved">Nj</span>.RuleMap.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Ninja_utils.Rule.t</a> <span class="xref-unresolved">Nj</span>.RuleMap.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-add_reset_rules" class="anchored"><a href="#val-add_reset_rules" class="anchor"></a><code><span><span class="keyword">val</span> add_reset_rules : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Ninja_utils.Rule.t</a> <span class="xref-unresolved">Nj</span>.RuleMap.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Ninja_utils.Rule.t</a> <span class="xref-unresolved">Nj</span>.RuleMap.t</span></span></code></div><div class="spec-doc"><p><code>add_reset_rules catala_exe_opts rules</code> adds ninja rules used to reset test files into <code>rules</code> and returns it.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_test_rules" class="anchored"><a href="#val-add_test_rules" class="anchor"></a><code><span><span class="keyword">val</span> add_test_rules : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Ninja_utils.Rule.t</a> <span class="xref-unresolved">Nj</span>.RuleMap.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../ninja_utils/Ninja_utils/Rule/index.html#type-t">Ninja_utils.Rule.t</a> <span class="xref-unresolved">Nj</span>.RuleMap.t</span></span></code></div><div class="spec-doc"><p><code>add_test_rules catala_exe_opts rules</code> adds ninja rules used to test files into <code>rules</code> and returns it.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ninja_start" class="anchored"><a href="#val-ninja_start" class="anchor"></a><code><span><span class="keyword">val</span> ninja_start : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Ninja_utils.ninja</a></span></code></div><div class="spec-doc"><p><code>ninja_start catala_exe</code> returns the inital <code>ninja</code> data structure with rules needed to reset and test files.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-collect_inline_ninja_builds" class="anchored"><a href="#val-collect_inline_ninja_builds" class="anchor"></a><code><span><span class="keyword">val</span> collect_inline_ninja_builds : 
  <span><a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Ninja_utils.ninja</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span>(string * <a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Ninja_utils.ninja</a>)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-collect_all_ninja_build" class="anchored"><a href="#val-collect_all_ninja_build" class="anchor"></a><code><span><span class="keyword">val</span> collect_all_ninja_build : 
  <span><a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Ninja_utils.ninja</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span>(string * <a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Ninja_utils.ninja</a>)</span> option</span></span></code></div><div class="spec-doc"><p><code>collect_all_ninja_build ninja tested_file catala_exe catala_opts reset_test_outputs</code> creates and returns all ninja build statements needed to test the <code>tested_file</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_root_test_build" class="anchored"><a href="#val-add_root_test_build" class="anchor"></a><code><span><span class="keyword">val</span> add_root_test_build : 
  <span><a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Ninja_utils.ninja</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Ninja_utils.ninja</a></span></code></div><div class="spec-doc"><p><code>add_root_test_build ninja all_file_names all_test_builds</code> add the 'test' ninja build declaration calling the rule 'run_and_display_final_message' for <code>all_test_builds</code> which correspond to <code>all_file_names</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-run_inline_tests" class="anchored"><a href="#val-run_inline_tests" class="anchor"></a><code><span><span class="keyword">val</span> run_inline_tests : <span>reset:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Directly runs the test (not using ninja, this will be called by ninja rules through the &quot;clerk runtest&quot; command)</p></div></div><h2 id="running"><a href="#running" class="anchor"></a>Running</h2><div class="odoc-spec"><div class="spec value" id="val-run_file" class="anchored"><a href="#val-run_file" class="anchor"></a><code><span><span class="keyword">val</span> run_file : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><h2 id="driver"><a href="#driver" class="anchor"></a>Driver</h2><div class="odoc-spec"><div class="spec value" id="val-get_catala_files_in_folder" class="anchored"><a href="#val-get_catala_files_in_folder" class="anchor"></a><code><span><span class="keyword">val</span> get_catala_files_in_folder : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-ninja_building_context" class="anchored"><a href="#type-ninja_building_context" class="anchor"></a><code><span><span class="keyword">type</span> ninja_building_context</span><span> = </span><span>{</span></code><table><tr id="type-ninja_building_context.last_valid_ninja" class="anchored"><td class="def record field"><a href="#type-ninja_building_context.last_valid_ninja" class="anchor"></a><code><span>last_valid_ninja : <a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Ninja_utils.ninja</a>;</span></code></td></tr><tr id="type-ninja_building_context.curr_ninja" class="anchored"><td class="def record field"><a href="#type-ninja_building_context.curr_ninja" class="anchor"></a><code><span>curr_ninja : <span><a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Ninja_utils.ninja</a> option</span>;</span></code></td></tr><tr id="type-ninja_building_context.all_file_names" class="anchored"><td class="def record field"><a href="#type-ninja_building_context.all_file_names" class="anchor"></a><code><span>all_file_names : <span>string list</span>;</span></code></td></tr><tr id="type-ninja_building_context.all_test_builds" class="anchored"><td class="def record field"><a href="#type-ninja_building_context.all_test_builds" class="anchor"></a><code><span>all_test_builds : string;</span></code></td></tr><tr id="type-ninja_building_context.all_failed_names" class="anchored"><td class="def record field"><a href="#type-ninja_building_context.all_failed_names" class="anchor"></a><code><span>all_failed_names : <span>string list</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Record used to keep tracks of the current context while building the <code>Ninja_utils.ninja</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ninja_building_context_init" class="anchored"><a href="#val-ninja_building_context_init" class="anchor"></a><code><span><span class="keyword">val</span> ninja_building_context_init : <span><a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Nj.ninja</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-ninja_building_context">ninja_building_context</a></span></code></div><div class="spec-doc"><p><code>ninja_building_context_init ninja_init</code> returns the empty context corresponding to <code>ninja_init</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-collect_in_folder" class="anchored"><a href="#val-collect_in_folder" class="anchor"></a><code><span><span class="keyword">val</span> collect_in_folder : 
  <span><a href="#type-ninja_building_context">ninja_building_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Nj.ninja</a> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-ninja_building_context">ninja_building_context</a></span></code></div><div class="spec-doc"><p><code>collect_in_directory ctx file_or_folder ninja_start reset_test_outputs</code> updates the building context <code>ctx</code> by adding new ninja build statements needed to test files in <code>folder</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-collect_in_file" class="anchored"><a href="#val-collect_in_file" class="anchor"></a><code><span><span class="keyword">val</span> collect_in_file : 
  <span><a href="#type-ninja_building_context">ninja_building_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../ninja_utils/Ninja_utils/index.html#type-ninja">Nj.ninja</a> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-ninja_building_context">ninja_building_context</a></span></code></div><div class="spec-doc"><p><code>collect_in_file ctx file_or_folder ninja_start reset_test_outputs</code> updates the building context <code>ctx</code> by adding new ninja build statements needed to test the <code>tested_file</code>.</p></div></div><h2 id="return-code-values"><a href="#return-code-values" class="anchor"></a>Return code values</h2><div class="odoc-spec"><div class="spec value" id="val-return_ok" class="anchored"><a href="#val-return_ok" class="anchor"></a><code><span><span class="keyword">val</span> return_ok : int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-return_err" class="anchored"><a href="#val-return_err" class="anchor"></a><code><span><span class="keyword">val</span> return_err : int</span></code></div></div><h2 id="driver_2"><a href="#driver_2" class="anchor"></a>Driver</h2><div class="odoc-spec"><div class="spec value" id="val-add_test_builds" class="anchored"><a href="#val-add_test_builds" class="anchor"></a><code><span><span class="keyword">val</span> add_test_builds : 
  <span><a href="#type-ninja_building_context">ninja_building_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-ninja_building_context">ninja_building_context</a></span></code></div><div class="spec-doc"><p><code>add_root_test_build ctx files_or_folders reset_test_outputs</code> updates the <code>ctx</code> by adding ninja build statements needed to test or <code>reset_test_outputs</code> <code>files_or_folders</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-makeflags_to_ninja_flags" class="anchored"><a href="#val-makeflags_to_ninja_flags" class="anchor"></a><code><span><span class="keyword">val</span> makeflags_to_ninja_flags : <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-driver" class="anchored"><a href="#val-driver" class="anchor"></a><code><span><span class="keyword">val</span> driver : 
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-main" class="anchored"><a href="#val-main" class="anchor"></a><code><span><span class="keyword">val</span> main : <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div></div></body></html>