<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>desugared (catala.desugared)</title><link rel="stylesheet" href="../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="index.html">catala</a> &#x00BB; desugared</nav><header class="odoc-preamble"><h1 id="desugared-representation"><a href="#desugared-representation" class="anchor"></a>Desugared representation</h1><p>This representation is the second in the compilation chain (see <a href="index.html#architecture">Architecture</a>). Its main difference with <a href="surface.html">the surface representation</a> is that the legislative text has been discarded and all the definitions of each variables have been collected in the same place rather than being scattered across the code base.</p><p>The module describing the abstract syntax tree is:</p><ul class="modules"><li><a href="Desugared/Ast/index.html"><code>Desugared.Ast</code></a> <span class="synopsis">Abstract syntax tree of the desugared representation</span></li></ul></header><nav class="odoc-toc"><ul><li><a href="#translation-to-the-scope-language">Translation to the scope language</a></li></ul></nav><div class="odoc-content"><h2 id="translation-to-the-scope-language"><a href="#translation-to-the-scope-language" class="anchor"></a>Translation to the scope language</h2><p>Before the translation to the <a href="scopelang.html">scope language</a>, <a href="Desugared/Dependency/index.html"><code>Desugared.Dependency</code></a> checks that within a scope, there is no computational circular dependency between the variables of the scope. When the dependency graph is a DAG, <code>Desugared</code>.Desugared_to_scope performs a topological ordering to produce an ordered list of the scope definitions compatible with the computation order. All the graph computations are done using the <a href="http://ocamlgraph.lri.fr/">Ocamlgraph</a> library.</p><p>The other important piece of work performed by <code>Desugared</code>.Desugared_to_scope is the construction of the default trees (see <a href="Shared_ast/index.html#type-base_gexpr.EDefault"><code>Shared_ast.base_gexpr.EDefault</code></a>) from the list of prioritized rules.</p><p>Related modules:</p><ul class="modules"><li><a href="Desugared/Dependency/index.html"><code>Desugared.Dependency</code></a> <span class="synopsis">Scope dependencies computations using <a href="http://ocamlgraph.lri.fr/">OCamlgraph</a></span></li><li><code>Desugared</code>.Desugared_to_scope </li></ul></div></body></html>